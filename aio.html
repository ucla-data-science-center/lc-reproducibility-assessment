<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Reproducibility Assessment: All in One View</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="assets/styles.css">
<script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="favicons/cp/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicons/cp/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="favicons/cp/favicon-16x16.png">
<link rel="manifest" href="favicons/cp/site.webmanifest">
<link rel="mask-icon" href="favicons/cp/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="white">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="black">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md top-nav carpentries"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="cp-logo" alt="Lesson Description" src="assets/images/carpentries-logo.svg"><span class="badge text-bg-danger">
          <abbr title="This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.">
            <a href="https://cdh.carpentries.org/the-lesson-life-cycle.html#early-development-pre-alpha-through-alpha" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-octagon" style="border-radius: 5px"></i>
              Pre-Alpha
            </a>
            <span class="visually-hidden">This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
<li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul>
</li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/aio.html';">Instructor View</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav carpentries" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Lesson Description" src="assets/images/carpentries-logo-sm.svg">
</div>
    <div class="lesson-title-md">
      Reproducibility Assessment
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            Reproducibility Assessment
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
<li><a class="dropdown-item" href="discuss.html">Discussion</a></li>
<li><a class="dropdown-item" href="reference.html">Glossary</a></li>
          </ul>
</li>
      </ul>
</div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Reproducibility Assessment
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress carpentries">
    <div class="progress-bar carpentries" role="progressbar" style="width: %" aria-valuenow="" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text">
<li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul>
</li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/aio.html">Instructor View</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->

            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="01-inspection.html">1. Code Inspection</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02-execution.html">2. Code Execution</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="03-review.html">3. Output Review</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>
                      <li><a href="discuss.html">Discussion</a></li>
<li><a href="reference.html">Glossary</a></li>
                    </ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources">
<a href="aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">

            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-01-inspection"><p>Content from <a href="01-inspection.html">Code Inspection</a></p>
<hr>
<p>Last updated on 2025-01-27 |

        <a href="https://github.com/curating4reproducibility/cure-carpentry-03-assessing/edit/main/episodes/01-inspection.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is the purpose of a code inspection?</li>
<li>Which elements of code support reproducibilty?</li>
<li>How do these elements of code support reproducibility?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Understand how code documents the analytical workflow</li>
<li>Identify the essential metadata that should be included in a code
header to support reproducibility</li>
<li>Explain the importance of non-executable comments for
reproduciblity</li>
<li>Understand what a main file is and how it contributes to
reproducibility</li>
<li>Evaluate code quality based on whether or not it upholds the
reproduciblity standard of being both independently understandable and
reusable</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Assessing the reproducibility of scientific claims involves an
exhaustive list of curation actions, which are outlined in the Data
Quality Review (DQR) framework introduced in <a href="https://curating4reproducibility.org/cure-carpentry-02-workflows/" class="external-link">Lesson
2: Curating for Reproducibility Workflows</a> of the Curating for
Reproducibility Curriculum. DQR organizes these curation actions into
four components–file review, documentation review, data review, and code
review–each of which promote reproducibility by ensuring the
completeness, accuracy, understandability, accessibility, and usability
of the research compendium.</p>
<p>Code review, in particular, puts reproducibility to the test by
verifying whether or not repeating the analytical steps used by the
original researcher produces the same results reported in the published
study. This assessment of reproducibility begins with a thorough code
inspection.</p>
<section><h2 class="section-heading" id="code-inspection-overview">Code Inspection Overview<a class="anchor" aria-label="anchor" href="#code-inspection-overview"></a>
</h2>
<hr class="half-width">
<p>Ideally, researchers, who know their work best and have direct access
to all the necessary details of their analytical workflow, would inspect
their code before they share it to be sure that all of the scripts
needed to load software packages, import and transform data, and produce
outputs are included in code files. They would review their code to be
sure that computing environment requirements and the expected runtime
are specified in code header metadata and that non-executable comments
are included throughout the code to serve as signposts for the
analytical workflow by indicating the purpose of commands. They would
also confirm that their files render properly, and re-run their code
(preferably on a machine other than the one used to perform the original
analysis) to be sure that the code compiles properly and executes the
analysis from beginning to end without errors.</p>
<p>Unfortunately, it is not always the case that researchers review
their code for understandability and executability prior to packaging it
into the research compendium and sharing it. Thus, the first step of any
reproducibility assessment is to inspect the code and confirm that it
includes the following:</p>
<ul>
<li>Sufficient information to enable users to re-create the computing
environment originally used to run the analysis and produce the reported
results</li>
<li>Details about the analytical workflow that allows others to
understand and re-trace the computational steps to produce expected
outputs</li>
<li>Scripts for installing necessary software tools and importing data
that take into account independent reuse of the code by researchers
other than those who initially wrote the code and ran the analysis</li>
</ul></section><section><h2 class="section-heading" id="the-analytical-workflow">The Analytical Workflow<a class="anchor" aria-label="anchor" href="#the-analytical-workflow"></a>
</h2>
<hr class="half-width">
<p>By its very nature, the analytical workflow of computational research
is captured in the code that contains the commands to install software
package dependencies, import and transform data, and execute scripts to
analyze data and produce results.</p>
<p>It is also the nature of research that analytical workflows are
rarely linear, which is often reflected in code that produces outputs in
a different order than the order in which they are presented as research
results in the manuscript. This makes it necessary for the code to
provide signposts to allow others to retrace the analytical steps. These
signposts should appear in the code as non-executable comments found in
code header metadata and throughout the code.</p>
<div class="section level3">
<h3 id="code-header-metadata">Code Header Metadata<a class="anchor" aria-label="anchor" href="#code-header-metadata"></a>
</h3>
<p>When inspecting the code, it should be evident the technical
requirements for running the code successfully. This information is
presented as code header metadata, which is a block of non-executable
text positioned at the top of the code before any command scripts.</p>
<p>Below in an example of code header metadata:</p>
<pre class="source"><code>************************************

*Title of the paper: Smallholder Farmers and Contract Farming in Developing Countries
*DOI:  https://www.pnas.org/doi/full/10.1073/pnas.1909501116

*Authors: Eva-Marie Meemken and Marc F. Bellemare
	 *Corresponding author: Eva-Marie Meemken
	 *Contact details: Cornell University and University of Minnesota.
	 *Warren Hall, Ithaca, NY 14850.
	 *Phone: +1 607 319 1121. email: emm253@cornell.edu
	
*Code last updated: 11/01/2019
*Software and version: STATA 15 MP, Run on Windows 10, 64-bit

*Code last executed for maintenance review:
*-22 APR 2022
*-Software and version: STATA 17 MP
*-Operating system:  Microsoft Windows Server 2019 Datacenter, Version 10.0.17763 Build 17763, 64-bit
*-Processor:  Intel(R) Xeon(R) CPU E5-4669 v3 @ 2.10GHz, 2095 Mhz, 10 Core(s)
*-Processing job completed in under 2 minutes using the above computing environment.

************************************</code></pre>
<p>Code header metadata should provide enough information to allow
others to recreate the computing environment used to run the analysis.
It should also specify acceptable uses of the code with a license, and
provide contact information for the creator(s) of the code in the event
that challenges arise when attempting to reproduce the analysis.</p>
<div id="checklist-code-header-metadata" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="checklist-code-header-metadata" class="callout-inner">
<h3 class="callout-title">Checklist: Code Header Metadata</h3>
<div class="callout-content">
<p>This checklist outlines the specific information that should be
included in code header metadata for every code file. A code inspection
should confirm the presence of each item in the checklist.</p>
<ul>
<li>Formal citation for the article that presents the results produced
from the code</li>
<li>Author contact information including email, affiliation, and
ORCID</li>
<li>Code license that specifies allowable uses and conditions for use of
the code</li>
<li>Computing environment specifications:
<ul>
<li>Operating system and version</li>
<li>Number of CPUs/cores</li>
<li>Size of memory</li>
<li>Statistical software package and version</li>
<li>Packages, libraries, and other software dependencies and their
versions</li>
</ul>
</li>
<li>File encoding</li>
<li>Date that the code was last updated</li>
<li>Date that the code was last run successfully</li>
<li>Estimated time to run the code from beginning to end</li>
</ul>
</div>
</div>
</div>
<div id="exercise-code-header-metadata-inspection" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise-code-header-metadata-inspection" class="callout-inner">
<h3 class="callout-title">Exercise: Code Header Metadata Inspection</h3>
<div class="callout-content">
<p>Review the sample code and identify each piece of information
outlined in the Code Header Metadata Checklist.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>solution</p>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="non-executable-comments">Non-executable Comments<a class="anchor" aria-label="anchor" href="#non-executable-comments"></a>
</h3>
<p>The code header metadata is an example of non-executable comments
that also appear elsewhere in the code. Non-executable code comments are
lines of human-readable text that can be placed throughout the code
without interfering with command scripts that perform analysis workflow
actions.</p>
<p>Non-executable comments are like a “note to self” that tells
researchers what the code is doing and why. These annotations remind the
researcher who originally wrote the code of the analytical workflow they
used to generate their research results, while also making this
information clear to other researchers. Code comments that support
reproducibility often include explanations of what lines or blocks of
code are meant to do or what outputs the code should produce.</p>
<p>The syntax for non-executable comments often uses a specified symbol
or combination of symbols (<code>*</code>, <code>//</code>,
<code>/**</code>, or <code>#</code> depending on the programming
language) placed before the comment text, which signals to the software
program that the text should be ignored.</p>
<p>The example below show examples of non-executable comments inserted
in the code:</p>
<figure><img src="fig/01-code-comments.png" title="Examples of non-executable code comments" alt="Examples of non-executable code comments" class="figure mx-auto d-block"></figure><div id="spotlight-sometimes-less-is-more" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="spotlight-sometimes-less-is-more" class="callout-inner">
<h3 class="callout-title">Spotlight: Sometimes Less is More</h3>
<div class="callout-content">
<p>During the research process, it is not uncommon for blocks of code
used to process and analyze data to gradually grow in size as
researchers rework or broaden their approach. Oftentimes, these code
blocks end up including lines of code that are no longer required to run
the analysis and possibly produce unnecessary outputs.</p>
<p>Some researchers may decide that the unneeded code has some potential
to be useful, whether to document previously used analytical steps or to
be used in subsequent analyses. In these cases, these lines of code are
not deleted, but instead commented out so that they are no longer
executable.</p>
<p>On the other hand, if the code has no role in the analysis and no
potential value, it is preferable that this extraneous code be deleted
entirely to reduce the amount of lines of code that need to be
inspected.</p>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="the-main-file">The Main File<a class="anchor" aria-label="anchor" href="#the-main-file"></a>
</h3>
<p>In some cases, the analysis workflow is complex enough to require
more than one code file to produce results. For research compendia that
contain more than one code file, it is highly recommended to use file
names that indicate the order in which they must be run and/or provide
this information in the README file (see Episode 3: Documentation Review
in <a href="https://curating4reproducibility.org/cure-carpentry-02-workflows/" class="external-link">Lesson
2: Curating for Reproducibility Workflows</a> in the Curating for
Reproducibility curriculum for more on the README file).</p>
<p>Use of a <strong>main file</strong>, while not a strict requirement,
can do even more to enhance reproducibility. A main file, when executed,
runs all of the other code files in the research compendium in the
proper sequence to generate all of the tables, figures, and in-text
results presented in the manuscript. It also provides an overview of how
the code files are interconnected, which makes it easier to understand
and re-trace the analytical workflow. This makes the main file the
starting point for fully automated push-button reproducibility, which is
what curating for reproducibility hopes to achieve.</p>
<p>Below is an example of code contained in a main file that includes
commands to run code files in the proper order:</p>
<pre class="source"><code>sysdir set PLUS ../Prerequisites
*ssc install estout
*ssc install xtqreg

do "1_1_household level data set.do"
do "1_2_multiple respondents per household.do"
do "2_1_merging hh level data all countries.do"
do "2_2_merging multiple responses data all countries.do"
do "3_1_merging all data sets all countries.do"
do "4_Main analysis.do"
do "5_SI Appendix.do"
	
log close</code></pre>
<div id="spotlight-our-language-choices" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="spotlight-our-language-choices" class="callout-inner">
<h3 class="callout-title">Spotlight: Our Language Choices</h3>
<div class="callout-content">
<p>The <strong>main file</strong> may be more familiar to some people as
the <em>master file</em>. While master file is the term that has been
adopted to refer to the file containing code that initiates execution of
code files in the correct order, this term is falling out of favor.</p>
<p>Many in the tech community are recognizing the terms such as “master”
and “slave” are racially-loaded terms that can be offensive to Black
people, who are underrepresented in tech community. By adopting more
neutral terms such as <em>main</em>, <em>primary</em>, or
<em>parent</em> for master and <em>secondary</em>, <em>follower</em> or
<em>child</em> for slave, unnecessary references to slavery is
avoided.</p>
<p>Such attention to language choices is an important step towards
increasing diversity and inclusion in tech and in other disciplinary
domains.</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="software-dependencies">Software Dependencies<a class="anchor" aria-label="anchor" href="#software-dependencies"></a>
</h2>
<hr class="half-width">
<p>In some cases, researchers have found that statistical software
programs lack functions for performing certain analytical operations.
Adept researchers have written custom code themselves and organized it
into a reusable package for sharing. This allows other researchers using
the same analytical approaches to access and install the package into
their own computational environments.</p>
<p>If a study requires the use of certain packages to run the analysis,
the research compendium should document this software dependency. In
addition, the code should not assume that users already have the
packages installed and loaded. Rather, the code should include
installation scripts for required packages.</p>
<p>When inspecting the code, look for commands that install and load
packages into the program environment such as
<code>install.packages("package_name")</code> or
<code>library(package)</code>.</p>
</section><section><h2 class="section-heading" id="data-import">Data Import<a class="anchor" aria-label="anchor" href="#data-import"></a>
</h2>
<hr class="half-width">
<p>A key function of the code is to point the software program to the
data to be used in the analysis, whether that data are included in the
research compendium, or are accessed from an external source. The code
inspection examines the commands for reading the data file(s) to
determine if the code clearly indicates which data files are used in the
analysis and where they are located. The inspection also checks to see
whether the commands are written in a way that enables others to re-run
the code without the need to make modifications to make it work
correctly.</p>
<div class="section level3">
<h3 id="file-paths">File paths<a class="anchor" aria-label="anchor" href="#file-paths"></a>
</h3>
<p>A file path is used to specify the location of a file within a
directory structure. Take a look at where the
<code>analysisdata.csv</code> file is located within the directory
structure below:</p>
<figure><img src="fig/01-data-location.png" title="Data file within a directory structure" alt="Data file within a directory structure" class="figure mx-auto d-block"></figure><p>File paths are represented as a slash-separated list of the folder
names followed by the file name, and can be written as either an
absolute file path or relative file path.</p>
<p><strong>Absolute file paths</strong><br><code>C:\Users\Documents\Compendium\Data\</code> is an absolute file
path that indicates the folder location of the
<code>analysisdata.csv</code> file in relation to a specific root folder
and all of the subfolders along the way.</p>
<figure><img src="fig/01-absolute-path.png" title="Absolute file path" alt="Absolute file path" class="figure mx-auto d-block"></figure><p>If the name or location of any one folder along the directory
structure changes, the path will be broken, and the code will fail to
read the data file. Moreover, using an absolute file path assumes that
other users will have the same exact directory structure, which is not
likely to be the case.</p>
<p><strong>Relative file paths</strong><br><code>../Compendium/Data</code> indicates the folder location of the
<code>analysisdata.csv</code> file relative to the current directory of
the computing environment being used at the moment to run the code. This
relative file path depends on folder names and locations of only part of
the directory structure.</p>
<figure><img src="fig/01-relative-path.png" title="Relative file path" alt="Relative file path" class="figure mx-auto d-block"></figure><p>The recommended practice is to use relative file paths instead of
absolute file paths because they are constructed in a way that
facilitates reproducibility. Relative file paths anticipate re-use of
the code by other researchers who will certainly use computing
environments with varying directory structures.</p>
<div id="exercise-file-paths" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise-file-paths" class="callout-inner">
<h3 class="callout-title">Exercise: File Paths</h3>
<div class="callout-content">
<p>To ensure that the analysis code executes successfully in any
computing environment, relative file paths should be used to import
data.</p>
<p>The R script to load data below uses an absolute file path. To
support reproducibility, convert the absolute file path into a relative
file path.</p>
<pre class="source"><code><span><span class="fu">read.csv</span> <span class="op">(</span><span class="st">"C:/Users/Documents/PopStudy1/Data/AnalysisData/pop1_analysis_data.csv"</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<pre class="source"><code><span><span class="fu">read.csv</span> <span class="op">(</span><span class="st">"./PopStudy1/Data/AnalysisData/pop1_analysis_data.csv"</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="putting-it-all-together">Putting It All Together<a class="anchor" aria-label="anchor" href="#putting-it-all-together"></a>
</h2>
<hr class="half-width">
<p>To assess whether the code upholds the reproducibility standard of
being both <strong><em>independently understandable</em></strong> and
<strong><em>reusable</em></strong>, code files must undergo an initial
inspection to identify any issues that can make reproducibility
difficult or impossible. The Code Inspection Checklist below outlines
the specific tasks involved in a thorough inspection.</p>
<div id="checklist-code-inspection" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="checklist-code-inspection" class="callout-inner">
<h3 class="callout-title">Checklist: Code Inspection</h3>
<div class="callout-content">
<ul>
<li>Does the code file open and render properly?</li>
<li>Does the code include the following components:
<ul>
<li>Code header metadata</li>
<li>Non-executable comments</li>
<li>Package installation scripts</li>
<li>Data import commands</li>
<li>Variable transformation scripts</li>
<li>Data analysis commands</li>
<li>Log commands</li>
</ul>
</li>
<li>Does the code header metadata include all essential information
needed to run the analysis (see the Code Header Metadata Checklist
above)?</li>
<li>Do non-executable comments provide signposts for the analytical
steps in the computational workflow?</li>
<li>Do data import commands use relative file paths instead of absolute
file paths?</li>
<li>If the research compendium contains multiple code files, do the
filenames indicate the order in which the code files should be
executed?</li>
<li>If the research compendium contains multiple code files, is there a
main file included in the compendium?</li>
</ul>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Code inspection is the first step in reproducibility assessment. The
inspection provides important information about the analytical workflow,
computational requirements, and input data.</li>
<li>A main file contains essential code that facilitates reproducibility
when more than one code file is required to repeat the analysis. The
main file acts as the starting point in fully-automated push-button
reproduction by running all code files in the proper sequence.</li>
<li>By provding the author’s contact information, computing
requirements, and licensing terms, code header metadata signals to users
of the author’s transparency and willingness to assist with reuse.</li>
<li>Non-executable comments in the code serve as a roadmap of the
analytical workflow by identifying code segments and their purpose.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-02-execution"><p>Content from <a href="02-execution.html">Code Execution</a></p>
<hr>
<p>Last updated on 2025-01-27 |

        <a href="https://github.com/curating4reproducibility/cure-carpentry-03-assessing/edit/main/episodes/02-execution.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What does it mean to execute code in the context of a research
compendium?</li>
<li>What can be done prior to publication to ensure that code will run
error-free?</li>
<li>What are some of the common errors that cause non-executable
code?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Understand the importance of the code execution tasks to curating
for reproducibility</li>
<li>Recall some of the common issues that prevent code from fully
executing</li>
<li>Perform the code execution process as part of a reproduciblity
assessment</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>After inspecting the code to be sure it includes all of the elements
required to achieve reproducibility, the next step in the curating for
reproducibility workflow is to run the code to confirm that it executes
without errors and produces the outputs that match the results reported
in the manuscript. This episode explains the process of running the code
and describes some of the most common code errors encountered during
reproducibility assessments.</p>
<section><h2 class="section-heading" id="code-execution-overview">Code Execution Overview<a class="anchor" aria-label="anchor" href="#code-execution-overview"></a>
</h2>
<hr class="half-width">
<p>As the first reusers of the research compendium, curators can
identify and address issues in the compendium that compromise standards
for reproducibility <em>before</em> results are published in a report or
manuscript. Not only does the curator inspect compendium files, but
also, they verify that the files function as they should by using them
to retrace the analytical workflow and reproduce reported results. This
gives researchers assurances that research compendia they make available
to the public meet high quality standards for reproducibility.</p>
<p>Executing the code provided in the research compendium is a critical
step in assessing reproducibility, which requires that the research
compendium be <strong><em>independently understandable</em></strong> and
<strong><em>reusable</em></strong>. In practical terms, this means that
anyone should be able to download the compendium and run the code to
analyze the data and produce expected outputs–without having to modify
the code or input data, <em>and</em> without assistance from the
researcher(s) who originally wrote the code and performed the
analysis.</p>
<p>Executing code as part of the code review process is not a common
activity for many library and information professionals. However, adding
this practice to curation and repository ingest workflows is imperative
if reproducibility is the goal.</p>
</section><section><h2 class="section-heading" id="running-the-code">Running the Code<a class="anchor" aria-label="anchor" href="#running-the-code"></a>
</h2>
<hr class="half-width">
<p>Prior to running the code, the computing environment will need to be
set up according to the information provided in the research compendium.
The initial code inspection, along with the data review, should give a
good sense of the technical specifications for running the code.</p>
<p>When setting up the computing environment for running the code,
consider the following:</p>
<p><strong>Does the computing environment to be used to run the code
meet the same or comparable technical requirements as described in the
code header metadata (or in the README file)?</strong><br>
Differences in operating systems and software versions can yield
discrepancies in outputs. Thus, the computing environment used to run
the code for reproducibility assessment should match the provided
specifications as closely as possible.</p>
<p><strong>Does the code automatically install required packages or
indicate in the header metadata how packages will need to be installed
manually?</strong><br>
When running code to assess reproducibility, use the base (i.e., fresh)
installation of the statistical software program <em>without</em>
packages and libraries pre-installed. The base installation allows for
detection of packages and libraries needed by the code to run
correctly.</p>
<p><strong>Can the code be run in a single sitting, or will the
computation require more than one session?</strong><br>
Take note of the estimated run time required to execute the code.
Complex or resource-heavy computations or analyses that use big data can
take a significant time to run from beginning to end.</p>
<blockquote>
<h2 id="spotlight-capturing-information-about-the-computing-environment">Spotlight:
Capturing Information About the Computing Environment</h2>
<p>There are specific commands that can help provide information about
the computing environment or session while also identifying the packages
necessary to run the code properly. While this information should be
included in the code header metadata and/or elsewhere in research
compendium documentation, curators can use these code commands to obtain
this information if it is missing from the compendium.</p>
<pre><code><span><span class="co"># Print version information about R, the OS, and packages</span></span></code></pre>
</blockquote>
<p>sessionInfo()</p>
<div id="print-version-information-about-the-pkg-package" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="print-version-information-about-the-pkg-package" class="callout-inner">
<h3 class="callout-title">Print version information about the “pkg” package</h3>
<div class="callout-content">
<p>packageVersion(“pkg”)</p>
<pre><code>{: .source}</code></pre>
</div>
</div>
</div>
<div id="exercise-lets-run-some-code" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise-lets-run-some-code" class="callout-inner">
<h3 class="callout-title">Exercise: Let’s Run Some Code!</h3>
<div class="callout-content">
<p>Open the sample code file and run the code. Did it run
successfully?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>If the code ran correctly using the specified software version, you
should see this:</p>
<p>[IMAGE]</p>
</div>
</div>
</div>
</div>
<div id="spotlight-what-about-containers" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="spotlight-what-about-containers" class="callout-inner">
<h3 class="callout-title">Spotlight: What About Containers?</h3>
<div class="callout-content">
<p>Rather than enabling scripts to run on different machines,
constraining the execution environment to a specific operating system
and specific dependencies may make it easier to ensure re-execution.</p>
<p>A common approach to making it easier to rerun code is to do the
computation on a cloud-based service or platform. Examples of this
approach include <a href="https://wholetale.org/" class="external-link">WholeTale</a>, <a href="https://codeocean.com/" class="external-link">Code Ocean</a>, and <a href="https://mybinder.org/" class="external-link">MyBinder</a>. Many of these are services
are built on top of JupyterHub or RStudio, which encapsulate the compute
environment in a container.</p>
<p>For desktop based workflows, the computation environment can be fixed
in place using a number of solutions such as using a virtual machine or
containerisation. This can be done by carefully constructing images or
build scripts to use <a href="https://www.vagrantup.com/" class="external-link">Vagrant</a>,
<a href="https://www.docker.com/" class="external-link">Docker</a> or <a href="https://sylabs.io/" class="external-link">Singularity</a>, usually starting with an
image or container that includes all or most of the software
required.</p>
<p>The image or container might be a suitable target for archiving
(being mindful of licensing restrictions), or the scripts and/or config
files that describe how to build the image or container, fetch the
appropriate code and data, and then combine them is a potential approach
for longer-term preservation of research compendia.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="common-code-issues">Common Code Issues<a class="anchor" aria-label="anchor" href="#common-code-issues"></a>
</h2>
<hr class="half-width">
<p>There are many reasons that code may not run properly. Oftentimes, it
is not the fault of the researcher who originally wrote the code. As
mentioned previously, differences in operating systems may affect the
mechanics of the computation or cause discrepancies in the computational
outputs. Software is often updated with bug fixes, new features, and
other changes in ways that do not allow for backwards compatibility.</p>
<p>Other reasons that code may not execute fully (or not at all) may
have something to do with the way the code was written. Below are some
of the issues that are caused by faulty code.</p>
<div class="section level3">
<h3 id="syntax-errors">Syntax errors<a class="anchor" aria-label="anchor" href="#syntax-errors"></a>
</h3>
<p>A simple typo in lines of code can cause syntax errors that cause
code execution to fail. Running the code from beginning to end will
catch these easy-to-fix errors.</p>
</div>
<div class="section level3">
<h3 id="missing-comments">Missing comments<a class="anchor" aria-label="anchor" href="#missing-comments"></a>
</h3>
<p>Code that is written with reproducibility in mind will include
non-executable comments that map code blocks to the tables, figures, and
in-line results presented in the publication. The absence of such
signposts, which will not necessarily cause code execution errors, still
make reproducibility assessment cumbersome.</p>
</div>
<div class="section level3">
<h3 id="use-of-absolute-file-paths">Use of absolute file paths<a class="anchor" aria-label="anchor" href="#use-of-absolute-file-paths"></a>
</h3>
<p>Absolute file paths assume that re-users have on their computer
workstation a file directory structure identical to that of the original
researcher. When it is not the case that the file directory is
identical, running the code will result in an error indicating that the
file cannot be found. Using relative paths makes the research compendium
portable by calling files relative to its location in the current
working directory.</p>
<pre class="source"><code><span><span class="co"># Read in the data file using an absolute file path</span></span>
<span><span class="fu">read.csv</span> <span class="op">(</span><span class="st">"C:/Users/Documents/PopStudy1/Data/AnalysisData/pop1_analysis_data.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#  Read in the data file using an absolute relative file path.</span></span>
<span><span class="fu">read.csv</span> <span class="op">(</span><span class="st">"./PopStudy1/Data/AnalysisData/pop1_analysis_data.csv"</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="missing-package-installation-scripts">Missing package installation scripts<a class="anchor" aria-label="anchor" href="#missing-package-installation-scripts"></a>
</h3>
<p>Scripts to install packages are required to successfully execute the
code (i.e., prerequisites). Without package installation scripts, the
code will fail to execute until the packages are installed and
loaded.</p>
<pre class="source"><code>* Create Prerequisite folder and put cluster2.ado in this folder
sysdir set PLUS ..\Prerequisites
ssc install outreg2
ssc install wyoung</code></pre>
</div>
<div class="section level3">
<h3 id="missing-seed">Missing seed<a class="anchor" aria-label="anchor" href="#missing-seed"></a>
</h3>
<p>Any computation that generates random numbers (e.g., Monte Carlo
simulations) requires a set seed to initialize the algorithm that
generates the random numbers. Without that specific seed, the code will
generate different random numbers, which will produce different outputs
each time the code is run.</p>
<pre class="source"><code><span><span class="co"># Below, no seed is set so that every time the code is run, the output will be different.</span></span>
<span><span class="co"># set year list</span></span>
<span><span class="va">yearsets</span> <span class="op">&lt;-</span> <span class="fu">split</span><span class="op">(</span><span class="fu">sample</span><span class="op">(</span><span class="va">years</span>, <span class="fu">length</span><span class="op">(</span><span class="va">years</span><span class="op">)</span><span class="op">)</span>, <span class="fu">cut</span><span class="op">(</span><span class="fu">seq</span><span class="op">(</span><span class="fl">1</span>,<span class="fu">length</span><span class="op">(</span><span class="va">years</span><span class="op">)</span><span class="op">)</span>, <span class="va">breaks</span><span class="op">-</span><span class="va">ks</span>, labels<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Below, the seed is set so that every time the code is run, the output will be the same.</span></span>
<span><span class="co"># set year list</span></span>
<span><span class="fu">set.seed</span><span class="op">(</span><span class="fl">123</span><span class="op">)</span> <span class="co"># set seed for random number generation</span></span>
<span><span class="va">yearsets</span> <span class="op">&lt;-</span> <span class="fu">split</span><span class="op">(</span><span class="fu">sample</span><span class="op">(</span><span class="va">years</span>, <span class="fu">length</span><span class="op">(</span><span class="va">years</span><span class="op">)</span><span class="op">)</span>, <span class="fu">cut</span><span class="op">(</span><span class="fu">seq</span><span class="op">(</span><span class="fl">1</span>,<span class="fu">length</span><span class="op">(</span><span class="va">years</span><span class="op">)</span><span class="op">)</span>, <span class="va">breaks</span><span class="op">-</span><span class="va">ks</span>, labels<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span></code></pre>
<div id="exercise-troubleshooting-problem-code" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise-troubleshooting-problem-code" class="callout-inner">
<h3 class="callout-title">Exercise: Troubleshooting Problem Code</h3>
<div class="callout-content">
<p>Run the code file that contains faulty code.</p>
<p>Answer the following questions:</p>
<ul>
<li>What issues did you encounter when executing the code?</li>
<li>How might the issues be resolved so that the code runs successfully
and produces the anticipated outputs?</li>
</ul>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<p>solution</p>
</div>
</div>
</div>
</div>
<div id="spotlight-coding-best-practices" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="spotlight-coding-best-practices" class="callout-inner">
<h3 class="callout-title">Spotlight: Coding Best Practices</h3>
<div class="callout-content">
<p>Even code that executes properly can use some improvements to make it
more readable and more efficient or elegant. This in turn can enhance
reproducibility by making code that may appear to be “messy” to some
users easier to understand and follow the sequence of analytical
operations.</p>
<p>One way that code can be made more readable is to <strong>address how
the code represents the sequence of operations</strong> so that the
presentation of code blocks makes logical sense. Beyond inserting
non-executable comments throughout the code to indicate what lines of
code are meant to do or what the code is meant to produce, presenting
code blocks in the same order in which corresponding results appear in
the manuscript (if feasible to do so), makes it less cumbersome to
assess reproducibility.</p>
<p>Another opportunity to improve code is to <strong>address
inefficiencies</strong> in the code. A script may include commands that
achieve a specific outcome, but do so inefficiently. For example, a
script that includes repeated statements when other expressions are more
appropriate like in the example below:</p>
<pre><code>* Inefficient code
SFA = SSMR1_N + SSPM1_N + SSST1N + SSAR1_N + SSDA1_N + SSLG1_N;
if SSMR1_N = . then SFA = .;
if SSPM1_N = . then SFA = .;
if SSST1_N = . then SFA = .;
if SSAR1_N = . then SFA = .;
if SSDA1_N = . then SFA = .;
if SSLG1_N = . then SFA = .;

* Efficient code that achieves same output as inefficient code above
SFA = sum(SSMR1_N, SSPM1_N, SSST1N, SSAR1_N, SSDA1_N, SSLG1_N)
SFA = sum(SSMR1_N, SSPM1_N, SSST1N, SSAR1_N, SSDA1_N, SSLG1_N na.rm = TRUE)</code></pre>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Executing code tests the reusability of the research compendium,
which is a fundamental criterion of reproducibility.</li>
<li>Prior to running the code, the computing enviroment will need to
meet the same or comparable techinical requirements as described in
compendium documentation.</li>
<li>Simple errors that prevent code from fully executing can be easily
addressed.</li>
</ul>
</div>
</div>
</div>
</div>
</section></section><section id="aio-03-review"><p>Content from <a href="03-review.html">Output Review</a></p>
<hr>
<p>Last updated on 2025-01-27 |

        <a href="https://github.com/curating4reproducibility/cure-carpentry-03-assessing/edit/main/episodes/03-review.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>Why is output review an essential component of curating code for
reproducibility?</li>
<li>What are outputs and why are they important?</li>
<li>What are the essential steps in output and manuscript review?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Understand the importance of code output and manuscript review to
curating for reproducibilty practice</li>
<li>Compare code outputs with manuscript results to identify
discrepancies</li>
<li>Understand how to address inconsistencies found during code output
and manuscript review</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>You reviewed files, documentation, and data. You ran the code and
confirmed that it is error-free. You are now ready for a key part of
curating for reproducibility: comparing the output produced by the code
with the findings reported in the article!</p>
<section><h2 class="section-heading" id="manuscript-results">Manuscript Results<a class="anchor" aria-label="anchor" href="#manuscript-results"></a>
</h2>
<hr class="half-width">
<p>An initial step in assessing reproducibility is inspecting the
manuscript to identify all analysis results appearing in tables, graphs,
figures, and in-text references. For the purposes of this lesson, we use
the term “manuscript” to refer to a working paper, draft, preprint,
article under review, or a published article.</p>
<p>Inspecting the manuscript requires a close reading of the entire
document, which may include appendices and supplementary materials. The
goal of this task is to confirm that the code includes the commands
needed to reproduce tables and figures, as well as results appearing as
in-line text and not referenced in tables, figures, and/or graphs.</p>
<p>To facilitate this process, curators may highlight sections of the
manuscript where results appear. Doing so will make it easier to compare
code outputs to the results in the manuscript. The next exercise offers
an opportunity to practice this technique.</p>
<div id="exercise-identifying-manuscript-results" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise-identifying-manuscript-results" class="callout-inner">
<h3 class="callout-title">Exercise: Identifying Manuscript Results</h3>
<div class="callout-content">
<p>Perform a manuscript inspection by doing a close reading of the
entire manuscript and highlighting sections of the manuscript that
present analysis results. Be sure that you highlight all figures,
tables, graphs, and in-text numbers.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>solution</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="code-outputs">Code Outputs<a class="anchor" aria-label="anchor" href="#code-outputs"></a>
</h2>
<hr class="half-width">
<p>When code executes successfully, the program will display the results
of the computations, i.e., code outputs. Sometimes, these outputs can be
difficult to interpret by non-domain experts, or simply because the
outputs lack the neat formatting of tables, figures, and graphs seen in
the manuscript. In other cases, code may generate outputs in an order
that does not align with the orientation of results in the manuscript.
Output files and log files can make it easier to locate and interpret
code outputs for code output and manuscript review purposes.</p>
<div class="section level3">
<h3 id="output-files">Output files<a class="anchor" aria-label="anchor" href="#output-files"></a>
</h3>
<p>Depending on how it is written, the code may include commands or
scripts that produce output files that contain an image of a graph,
figure, table, or some other result, which is often embedded in the
manuscript. These output files are standalone artifacts that are
included in the research compendium. Below are some output file
examples:</p>
<figure><img src="fig/03-outputs.png" title="Example of output files" alt="Output files" class="figure mx-auto d-block"></figure>
</div>
<div class="section level3">
<h3 id="the-log-file">The log file<a class="anchor" aria-label="anchor" href="#the-log-file"></a>
</h3>
<p>The log file is of particular importance in the reproducibility
assessment process because it not only can present code outputs in a
readable format, but also it serves as a record of the analytical
workflow. The log file provides a written log of the computational
events that occurred during a given session during which the program was
executed. The log file can be generated automatically or manually, and
typically serves as a reference for researchers as they write or revise
the manuscript. Below is an example log:</p>
<figure><img src="fig/03-log-file.png" title="Example of a log file" alt="Log file example" class="figure mx-auto d-block"></figure><p>For curators, the log file can be useful because results are written
into the log (with the exception of graphs), which can be used to
reference code outputs when assessing whether or not the research
compendium can be used to reproduce manuscript results. The image below
shows an example of code and a section of the log file that the code
produced:</p>
<figure><img src="fig/03-code-log.png" title="Code and the section of the log file the code produced" alt="Code and the section of the log the code produced" class="figure mx-auto d-block"></figure><div id="spotlight-when-data-are-restricted" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="spotlight-when-data-are-restricted" class="callout-inner">
<h3 class="callout-title">Spotlight: When Data are Restricted</h3>
<div class="callout-content">
<p>For some research compendium, data files cannot be included because
they contain personally identifiable informationn (PII), protected
health information (PHI), or otherwise restricted data that cannot be
shared publicly, even for curation purposes. In these cases, the log
file can provide evidence that the computational workflow was executed,
and that it produced the outputs featured in the manuscript.</p>
</div>
</div>
</div>
<p>Like much of what we have been learning, descriptions of concepts and
processes can seem abstract when reading about them alone. Making the
connection from concept to practice takes time, and cultivating a new
skill takes practice. Let’s practice what we have learned in Lesson 3
thus far by digging into outputs from a real life study.</p>
<div id="identifying-code-outputs" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="identifying-code-outputs" class="callout-inner">
<h3 class="callout-title">Identifying Code Outputs</h3>
<div class="callout-content">
<p>In the sample research compendium, the researcher has included a log
file that includes code outputs. Review the log closely to identify code
outputs. Highlight all sections of the log that show code outputs.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<p>solution</p>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="comparing-code-outputs-to-reported-results">Comparing Code Outputs to Reported Results<a class="anchor" aria-label="anchor" href="#comparing-code-outputs-to-reported-results"></a>
</h2>
<hr class="half-width">
<p>The examples below show the output of specific code blocks alongside
their corresponding results presented in the manuscript.</p>
<p><strong>Crosstab and Chi-Square (Stata):</strong> <img src="fig/03-crosstab.png" title="Example of Crosstab output and manuscript results" alt="Crosstab output and manuscript results" class="figure"></p>
<p><strong>Probit regression (Stata):</strong> <img src="fig/03-probit.png" title="Example of probit regression and manuscript results" alt="Probit regression and manuscript results" class="figure"></p>
<div class="section level3">
<h3 id="verifying-reproducibility">Verifying Reproducibility<a class="anchor" aria-label="anchor" href="#verifying-reproducibility"></a>
</h3>
<p>Verifying reproducibility requires that the results reported in the
manuscript are compared against outputs generated by the code. Any
inconsistencies found when comparing code outputs to corresponding
results in the manuscript indicates irreproducibility.</p>
<p>Inconsistencies can appear in several ways, from differences in
decimal rounding and mislabeled graphs, to more significant
discrepancies as shown in the example below:</p>
<figure><img src="fig/03-typo.png" title="Example of code output and manuscript results discrepancy" alt="Example of code output and manuscript results discrepancy" class="figure mx-auto d-block"></figure><div id="exercise-comparing-code-outputs-to-manuscript-results" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise-comparing-code-outputs-to-manuscript-results" class="callout-inner">
<h3 class="callout-title">Exercise: Comparing Code Outputs to Manuscript Results</h3>
<div class="callout-content">
<p>Using the manuscript and log file from the previous exercises,
compare the code outputs highlighted in the log file and the results
highlighted in the manuscript. List any discrepancies you find between
code outputs and corresponding results in the manuscript.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<p>solution</p>
</div>
</div>
</div>
</div>
<p>The checklist below outlines the tasks completed during the code
output and manuscript review as part of the code review component of the
curation for reproducibility workflow.</p>
<div id="checklist-code-output-and-manuscript-review" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="checklist-code-output-and-manuscript-review" class="callout-inner">
<h3 class="callout-title">Checklist: Code Output and Manuscript Review</h3>
<div class="callout-content">
<ul>
<li>Review the manuscript, including appendices and supplemental
materials, to locate and highlight analysis results displayed in
figures, tables, graphs, and in-text numbers.</li>
<li>Review the log file to locate and highlight code outputs.</li>
<li>Match the highlighted code outputs in the log file to the
highlighted results in the manuscript.</li>
<li>Compare code outputs to manuscript results to confirm an exact match
of numerical results</li>
<li>If output files are included in the compendium, compare figures,
graphs, and tables in the output files to the figures, graphs, and
tables in the manuscript.</li>
<li>Document any discrepancy–no matter how minor–found between the code
outputs and manuscript results</li>
</ul>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="addressing-inconsistencies">Addressing Inconsistencies<a class="anchor" aria-label="anchor" href="#addressing-inconsistencies"></a>
</h3>
<p>When inconsistencies are discovered during the code output and
manuscript results comparison, they should be documented in enough
detail so that the researcher is able to locate the discrepancy and take
corrective actions to resolve the inconsistencies.<br>
It is highly recommended that researchers run their code and verify
their results themselves prior to submitting their compendium for
curator review. Researchers know their research best and can spot and
address problems more quickly than any third party can.</p>
<p>More often than not, there are simple explanations for these
inconsistencies. The vast majority of researchers share their compendia
in good faith and with the expectation that their code will reproduce
their reported results. As the first re-users of the research
compendium, curators can flag these inconsistencies so that researchers
have the opportunity to make corrections <em>before</em> sharing it
publicly.</p>
<p>Continue to <a href="https://curating4reproducibility.org/cure-carpentry-04-packaging/" class="external-link">Lesson
4: Compendium Packaging and Publishing</a> of the Curating for
Reproducibility curriculum to learn about considerations for sharing the
research compendium.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Every table, figure, and in-text number in the manuscript should be
accounted for in code outputs.</li>
<li>The curating for reproducibilty workflow includes identifying
specific commands in code files that produce outputs, and then verifying
that reported results can be reproduced using that code.</li>
<li>Curators should document discrepanices found during the code output
and manuscript review process and take steps to address them.</li>
</ul>
</div>
</div>
</div>
</div>
</section></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/curating4reproducibility/cure-carpentry-03-assessing/edit/main/README.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/curating4reproducibility/cure-carpentry-03-assessing/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/curating4reproducibility/cure-carpentry-03-assessing/" class="external-link">Source</a></p>
				<p><a href="https://github.com/curating4reproducibility/cure-carpentry-03-assessing/blob/main/CITATION" class="external-link">Cite</a> | <a href="mailto:team@carpentries.org">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.11" class="external-link">sandpaper (0.16.11)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.7" class="external-link">pegboard (0.7.7)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.5" class="external-link">varnish (1.0.5)</a></p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://curating4reproducibility.github.io/cure-carpentry-03-assessing/aio.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "All in One View",
  "creativeWorkStatus": "active",
  "url": "https://curating4reproducibility.github.io/cure-carpentry-03-assessing/aio.html",
  "identifier": "https://curating4reproducibility.github.io/cure-carpentry-03-assessing/aio.html",
  "dateCreated": "2013-07-14",
  "dateModified": "2025-01-27",
  "datePublished": "2025-01-27"
}

  </script><script>
		feather.replace();
	</script><!-- Matomo --><script>
          var _paq = window._paq = window._paq || [];
          /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
          _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
          _paq.push(["setDomains", ["*.lessons.carpentries.org","*.datacarpentry.github.io","*.datacarpentry.org","*.librarycarpentry.github.io","*.librarycarpentry.org","*.swcarpentry.github.io", "*.carpentries.github.io"]]);
          _paq.push(["setDoNotTrack", true]);
          _paq.push(["disableCookies"]);
          _paq.push(["trackPageView"]);
          _paq.push(["enableLinkTracking"]);
          (function() {
              var u="https://matomo.carpentries.org/";
              _paq.push(["setTrackerUrl", u+"matomo.php"]);
              _paq.push(["setSiteId", "1"]);
              var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0];
              g.async=true; g.src="https://matomo.carpentries.org/matomo.js"; s.parentNode.insertBefore(g,s);
          })();
        </script><!-- End Matomo Code -->
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

